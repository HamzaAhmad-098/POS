<!-- app/views/products/quick_add.html.erb -->
<div class="container">
  <div class="header">
    <h1>âš¡ Quick Add - Common Products</h1>
    <div class="actions">
      <%= link_to "â† Back to Products", products_path, class: "btn btn-secondary" %>
      <%= link_to "ðŸ“· Scan Barcode", scan_products_path, class: "btn btn-primary" %>
      <%= link_to "âž• Regular Add", new_product_path, class: "btn btn-outline" %>
    </div>
  </div>

  <div class="quick-add-container">
    <%= form_with url: create_quick_products_path, method: :post, local: true, class: "quick-form" do |form| %>
      <div class="common-products-grid">
        <h3>Common Pakistani Store Products</h3>
        
        <div class="products-list">
          <% @common_products.each_with_index do |product, index| %>
            <div class="product-quick-item">
              <div class="product-info">
                <strong><%= product[:name] %></strong>
                <small class="text-muted"><%= product[:brand] %> â€¢ <%= product[:category] %></small>
              </div>
              <div class="product-actions">
                <div class="input-group input-group-sm">
                  <span class="input-group-text">Rs.</span>
                  <input type="number" name="products[][selling_price_cents]" 
                         value="<%= (product[:price] * 100).to_i %>" 
                         class="form-control" step="0.01" required>
                </div>
                <input type="hidden" name="products[][name]" value="<%= product[:name] %>">
                <input type="hidden" name="products[][brand]" value="<%= product[:brand] %>">
                <input type="hidden" name="products[][category_id]" value="<%= find_or_create_category_id(product[:category]) %>">
                <input type="hidden" name="products[][unit]" value="pcs">
                <input type="hidden" name="products[][current_stock]" value="0">
              </div>
            </div>
          <% end %>
        </div>

        <div class="form-actions">
          <%= form.submit "ðŸ’¾ Add Selected Products", class: "btn btn-success btn-lg" %>
          <%= link_to "Cancel", products_path, class: "btn btn-outline btn-lg" %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<style>
.common-products-grid {
  background: white;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.products-list {
  max-height: 500px;
  overflow-y: auto;
  margin: 20px 0;
}

.product-quick-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px;
  border-bottom: 1px solid #e9ecef;
}

.product-quick-item:last-child {
  border-bottom: none;
}

.product-info {
  flex: 1;
}

.product-actions {
  display: flex;
  gap: 10px;
  align-items: center;
}

.product-actions .input-group {
  width: 120px;
}

.quick-form .form-actions {
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px solid #e9ecef;
  text-align: center;
}
</style>